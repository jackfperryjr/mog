@model IEnumerable<Moogle.Models.Game>

@using Microsoft.AspNetCore.Identity
@using Moogle.Models

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
    ViewData["Title"] = "| Games";
}
@section Styles {
    <link href="@Url.Content("~/css/site.css")" rel="stylesheet" type="text/css" />
}
<h2 class="lightSpeedIn">game list</h2>
<hr />
<form asp-action="Index" method="get">
    <div id="input-container">
        <p class="text-left">
            <input class="input-bar" type="text" name="SearchString" placeholder='Search ex. "04"' value="@ViewData["CurrentFilter"]" />
            <button id="search-btn" type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
            <a class="btn btn-default back-btn" asp-action="Index"><span class="glyphicon glyphicon-th-list"></span> full list</a>
            <a class="btn btn-default back-btn" asp-action="Create"><span class="glyphicon glyphicon-plus"></span> add game</a>
        </p>
    </div>
</form>
<div class="row">
    @foreach (var item in Model) 
    {
        <div class="well col-md-4 text-center character-card">
            <a data-toggle="modal" href="@("#viewModal" + item.GameId)"><img class="character-list-thumb" asp-route-id="@item.GameId" src="@Url.Content(item.Picture)" alt="Picture of @Html.DisplayFor(modelItem => item.Title)" title="@Html.DisplayFor(modelItem => item.Title)"/></a>
            <div class="modal fade" id="@("viewModal" + item.GameId)" tabindex="-1" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content text-center">
                        @using (Html.BeginForm("Details", "Game"))
                        {
                            <input type="hidden" value="@item.GameId" name="GameId" />
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">X</button>
                                <h4 class="modal-title">@item.Title</h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <img class="character-delete-img-game" asp-route-id="@item.GameId" src="@Url.Content(item.Picture)" alt="@Html.DisplayFor(modelItem => item.Title)" title="@Html.DisplayFor(modelItem => item.Title)"/>
                                </div>
                                <div class="row text-left">
                                    <div class="col-md-12">
                                        <h4 id="desc">@Html.DisplayFor(modelItem => item.Description)</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <a class="btn btn-danger" data-toggle="modal" href="@("#deleteModal" + item.GameId)">delete</a>
                                <a class="btn btn-default" asp-action="Edit" asp-route-id="@item.GameId">edit</a>
                                <button type="button" class="btn btn-default" data-dismiss="modal">close</button>
                            </div>
                        }
                    </div>
                </div>
            </div>
            <br/>
            <span>
                <a asp-action="Edit" asp-route-id="@item.GameId">edit</a> | 
                <a data-toggle="modal" href="@("#deleteModal" + item.GameId)">delete</a>
                    <div class="modal fade" id="@("deleteModal" + item.GameId)" tabindex="-1" role="dialog">
                        <div class="modal-dialog">
                            <div class="modal-content text-center">
                                @using (Html.BeginForm("Delete", "Game"))
                                {
                                    <input type="hidden" value="@item.GameId" name="GameId" />
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">X</button>
                                        <h4 class="modal-title">Delete @item.Title</h4>
                                    </div>
                                    <div class="modal-body">
                                        <img class="character-delete-img-game" asp-route-id="@item.GameId" src="@Url.Content(item.Picture)" alt="@Html.DisplayFor(modelItem => item.Title)" title="@Html.DisplayFor(modelItem => item.Title)"/>
                                        <br/><br/>
                                        <p>Are you sure you want to delete @item.Title?</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-danger">yes</button>
                                        <button type="button" class="btn btn-default" data-dismiss="modal">no</button>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>  
                </span>                      
    </div>
    }
</div>